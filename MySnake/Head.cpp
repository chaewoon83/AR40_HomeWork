#include "Head.h"
#include <conio.h>

Head::Head()
	:PrevKey(0)
{
}

Head::~Head() 
{
}


void Head::Update() 
{
	int Value = _getch();
	if (PrevKey == 0)
	{
		switch (Value)
		{
		case 'a':
		case 'A':
			// 화면바깥으로 이동하면 이동이 안되게 해주세요.
			InScreenMovement({ -1, 0 });
			PrevKey = Value;
			break;
		case 'd':
		case 'D':
			InScreenMovement({ 1, 0 });
			PrevKey = Value;
			break;
		case 'w':
		case 'W':
			InScreenMovement({ 0, -1 });
			PrevKey = Value;
			break;
		case 's':
		case 'S':
			InScreenMovement({ 0, 1 });
			PrevKey = Value;
			break;
		case 'q':
		case 'Q':
			// 무슨일인가가 벌어져서
			// 게임이 종료된다.
			Death();
			return;
		default:
			break;
		}
	}
	else
	{
		switch (PrevKey)
		{
		case 'a':
		case 'A':
			switch (Value)
			{
			case 'a':
			case 'A':
				// 화면바깥으로 이동하면 이동이 안되게 해주세요.
				InScreenMovement({ -1, 0 });
				PrevKey = Value;
				break;
			case 'w':
			case 'W':
				InScreenMovement({ 0, -1 });
				PrevKey = Value;
				break;
			case 's':
			case 'S':
				InScreenMovement({ 0, 1 });
				PrevKey = Value;
				break;
			case 'q':
			case 'Q':
				// 무슨일인가가 벌어져서
				// 게임이 종료된다.
				Death();
				return;
			default:
				break;
			}
			break;
		case 'd':
		case 'D':
			switch (Value)
			{
			case 'd':
			case 'D':
				InScreenMovement({ 1, 0 });
				PrevKey = Value;
				break;
			case 'w':
			case 'W':
				InScreenMovement({ 0, -1 });
				PrevKey = Value;
				break;
			case 's':
			case 'S':
				InScreenMovement({ 0, 1 });
				PrevKey = Value;
				break;
			case 'q':
			case 'Q':
				// 무슨일인가가 벌어져서
				// 게임이 종료된다.
				Death();
				return;
			default:
				break;
			}
			break;
		case 's':
		case 'S':
			switch (Value)
			{
			case 'a':
			case 'A':
				// 화면바깥으로 이동하면 이동이 안되게 해주세요.
				InScreenMovement({ -1, 0 });
				PrevKey = Value;
				break;
			case 'd':
			case 'D':
				InScreenMovement({ 1, 0 });
				PrevKey = Value;
				break;
			case 's':
			case 'S':
				InScreenMovement({ 0, 1 });
				PrevKey = Value;
				break;
			case 'q':
			case 'Q':
				// 무슨일인가가 벌어져서
				// 게임이 종료된다.
				Death();
				return;
			default:
				break;
			}
			break;
		case 'w':
		case 'W':
			switch (Value)
			{
			case 'a':
			case 'A':
				// 화면바깥으로 이동하면 이동이 안되게 해주세요.
				InScreenMovement({ -1, 0 });
				PrevKey = Value;
				break;
			case 'd':
			case 'D':
				InScreenMovement({ 1, 0 });
				PrevKey = Value;
				break;
			case 'w':
			case 'W':
				InScreenMovement({ 0, -1 });
				PrevKey = Value;
				break;
			case 'q':
			case 'Q':
				// 무슨일인가가 벌어져서
				// 게임이 종료된다.
				Death();
				return;
			default:
				break;
			}
			break;
		}
	}

	return;
}



void Head::OverLap(ConsoleObject* _Link)
{
	AllBody.push_back((Body*)_Link);
}